CREATE TABLE [dbo].[Orders] (
    [Id] [int] NOT NULL IDENTITY,
    [CustomerId] [int] NOT NULL,
    [Address] [nvarchar](500) NOT NULL,
    [CreatedTime] [datetime] NOT NULL,
    [LatestModifiedTime] [datetime] NOT NULL,
    CONSTRAINT [PK_dbo.Orders] PRIMARY KEY ([Id])
)

CREATE INDEX [IX_CustomerId] ON [dbo].[Orders]([CustomerId])

CREATE TABLE [dbo].[OrderDetails] (
    [Id] [int] NOT NULL IDENTITY,
    [OrderId] [int] NOT NULL,
    [ProductId] [int] NOT NULL,
    [Quantity] [int] NOT NULL,
    CONSTRAINT [PK_dbo.OrderDetails] PRIMARY KEY ([Id])
)

CREATE INDEX [IX_OrderId] ON [dbo].[OrderDetails]([OrderId])

CREATE INDEX [IX_ProductId] ON [dbo].[OrderDetails]([ProductId])

ALTER TABLE [dbo].[Orders] ADD CONSTRAINT [FK_dbo.Orders_dbo.Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [dbo].[Customers] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[OrderDetails] ADD CONSTRAINT [FK_dbo.OrderDetails_dbo.Orders_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [dbo].[Orders] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[OrderDetails] ADD CONSTRAINT [FK_dbo.OrderDetails_dbo.Products_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [dbo].[Products] ([Id]) ON DELETE CASCADE

INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'202012291020563_CreateOrder_OrderDetail', N'EntityOperation.Migrations.Configuration',  0x1F8B0800000000000400ED5BDB6EE336107D2FD07F10F45864AD24DB02DBC0DE45EA6C8AA09B4BE364D1B780916887A844A922152428FA657DE827F5173AD485927891643BF13ADBA040B12639170ECF90339AC9BF7FFF33FEF01085CE3D4E1989E9C4DD1BEDBA0EA67E1C10BA98B8199FBF79E77E78FFED37E38F41F4E07CAED6BD15EB8092B2897BC77972E079CCBFC31162A388F869CCE2391FF971E4A120F6F677777FF4F6F63C0C2C5CE0E538E3CB8C7212E1FC07FC9CC6D4C709CF50781A073864E538CCCC72AECE198A304B908F27EE47A0E48FE7094E11075D5CE7302408D498E170EE3A88D298E71307D70CCF781AD3C52C8101145E3D2618D6CD51C870A9FC41BD7CE83E76F7C53EBC9AB062E5678CC7D1920CF7DE9686F154F295CCEB4AC381E90A43895DE7E69BB8D35C044E5D471576300D53B170E24ABB8EF2931855343B4EFE7B4742009022FEDB71A659C8B3144F28CE788A60C545761B12FF17FC7815FF8EE9846661D8D40B3483B9D6000C5DA43148E68F97785E6A7B12B88ED7A6F3544249D6A029F67142F9DB7DD73903E1E836C4F2D81B7B9EF138C53F632A368C830BC4394EA9E08173C369D21559E2FF9534C019F88BEB9CA2874F982EF81D780838C83179C04135502A704D097817D0F034C30605BB855EDCC5B44BEAFEF783A4760B99A65858E48AD41B3C8281E2F7920A7F0242C6013B644E56657986EEC9223F3385F9791A001A5DE71287F934BB234971118CF2A99B1AF1C7691C5DC6614524676EAE50BAC01C948A8DD3B3384B7D45A5B157BB56A7C3E5BC96F1B69CE0D5D5344096A7D12FB39BCF6110A498B10EFFF961F759DCF6C57854ED30EBF854E534169FAA5C6E29373FC21C91B0C3D98B0537A5CF29BA3527CD2EDF5AB1BED717EC96F6FD82ECF5065065E5C659D7FDE16790F97C5D36BF66A8D479292EDDF07E0A5C1BDDCE88FCA1AA9516EB554EAE33AB574E772A58AD31A938D8F5A41EC3DDAE247975B9ED886F53E2D7EF19F64984E012BD48E15F6582FACE75663E120C97F7DCAD7A866DA03E642CF6497E84CD0BA27E77DB6A7DA481D3FD081727285D164E11104D12C030489FB8DF693BB5B2940F67CDB28E06DA5CF75CD503CEE9110E31C7CEA15FA4C753C47C14E88606BB04ED11701A9C0AD4A2700A7710B821A15CF730427D92A0B05377856AA0670AAD247F75E60827980AA7EA3C8721829B71AEAE8094A398ABCF3A63AF01A901486B3D389DC830BF3E0ADEAA486849D49923B61E2C6F09EA4CBA6F0A78A63319225B46585F1C78D5233E041E5A64F1A4E0536392067719696C330015FD370C41E56C86486F44E81B8061F1FE020DA80B51927CD86FC5107E308591D70C9791242B231C154782E50C73E54687BCB57EEDB5A75303639B49F5994BE350DE8143C865FA6C6652F9490FABF27C4C6CA443282C1AB657546A7C49682C327F6B50C1D01BF548CD6BF36988EA8D731A4C1A07A9FA6D7B874377DF4EEB2C06B03FC5031F63D50C12067DC6303EBFBD465DD3181243DDE6303E10839F88754DA23E0A0D7EB57B0C364B9505C85BA82E7D7945EDABAA91799622D9F814250964678DA25939E2CC8A8AD9F4CD6CF96A5254F0F07C66282A496DA524C835D1022BB3201A343D2629E39014A15B2472A0691069CB1A77AEE502AA04A9D7AA7E66D5BD5451887F17544AE57064BB5D6A0B1EC3A622F1BAE5B9B4E13AD049F39A250A516A48DDA7719845D4FED0DAA98B64BC495F8C0CE750568E9A2CCAA1E13C5AF97393536B62383F530EDD646B9AD7B98F3DE5B4B4C84103851679B551360883E50DB80E008DF7FA00F459E89E077ACDA4B475E61DC9AA9D9B2CC13459C9C15728AE0EC5EA1D5B1B90652CB8222C6DD4CF034E99B536595853593B9F46E2D1BA21EDF9889D575D1F68B2AA47B70636325C59073296606C005CAC945BFB84161FA7DB00216A9DB09BC7FFF0DED2425C7589942E435D25A41D97E1657F7398166F164B440921BE27818835678F8CE36824168C667F84D390C07EEB05A788923998AC28EEB8FBBB7BFB4A8BD9F6B47B798C05A1213C37F57C6DBC424584557B6B504B565D9A45297A8F52FF0EA55A596A9D9E2A2353D15555335DB1852A8001FEB495A6812C97EC57FA3A90A2F70CE562B42F7A2734C00F13F7CF9CECC039F9EDA6A6DC71728B1C38BBCE5FEB361B198195B71BAD5FC47C29D032C5862F16604A4BCA507495646B414B6B64192A5C12AE255E6D80C9A53F0D4CCCB59F970A916779AD9A1D12C1063A24B6EF7259B943A22E386CBA8341F994BC4A57C64AD5C08E4F9CCF53FBFB2AFB1C36DC7860AC3BAC5EDB5EBD8CBCE18AF157D6A720AB591B6E1BD806F8D8BF0A7D71006D438F815E16B37CB0D3DAF23BBA088A4F1DF0BADEC670DAC5AB6A2F5B1BBB04EC3D0626E6961A7047FF415FFB81558AA5486B6B50E8EA4F30C9B0166E9FBB7B413DD87671B1B724AD57B3B7B63DA15F55FBD565A9316C69F38182C1D6B7EECD6D7989C602FDEB2A5C788D3FD0852B979145CD42FCB92EC57EEBAA936B4EE83CAE2E5D45A36A8992279CC2D620234087292773E47398F6316379C3F9671466A2E810DDE2E0849E673CC9386C1947B761AB92226EEE2EF979F7445BE7F17992FF45C3536C01D42422A939A73F65240CA4DEC786A4C6C2423C0965EA29CE928B1474F128399D69A57A1BA3D27CF225BBC251128A54EC9CCED03D5E45B76B863FE105F21FAB8FE47626FD07D136FBF888A0458A2256F2A8E9E1276038881EDEFF079B367DF3A73E0000 , N'6.4.4')